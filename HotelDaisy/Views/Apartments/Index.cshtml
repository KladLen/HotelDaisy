@using Microsoft.AspNetCore.Identity
@using HotelDaisy.Data

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

@model IEnumerable<Apartment>

@{
	ViewData["Title"] = "Apartments";
}

<div class="container p-2">
    <h1 class="display-4 pb-4 text-center">Check our Apartments</h1>
	<table class="table table-bordered align-middle" style="width:100%">
		@foreach (var obj in Model)
		{
			string imageBase64Data = Convert.ToBase64String(obj.Image);
			string imageDataURL = string.Format("data:image/jpg;base64,{0}", imageBase64Data);
			<tr>
				<td rowspan="4">
					<img src="@imageDataURL" style="max-width: 100%; height: auto;">
				</td>
				<th style="width:25%">
					Rooms number
				</th>
				<td style="width:25%">
					@obj.NumberOfRooms
				</td>
			</tr>
			<tr>
				<th>
					Balcony
				</th>
				<td>
					@obj.Balcony
				</td>
			</tr>
			<tr>
				<th>
					Price
				</th>
				<td>
					@obj.Price
				</td>
			</tr>
			<tr>
				<td colspan="2">
					<a class="btn btn-primary w-50" asp-controller="Reservation" asp-action="CreateForSelectedApartment" asp-route-Id="@obj.Id">Book now</a>
					@if (User.IsInRole("Admin"))
					{
						<a class="btn btn-primary w-50 mt-2" asp-controller="Apartments" asp-action="Edit" asp-route-Id="@obj.Id">Edit</a>
						<a class="btn btn-primary w-50 mt-2" asp-controller="Apartments" asp-action="Delete" asp-route-Id="@obj.Id">Delete</a>
					}
				</td>
			</tr>
		}
	</table>
</div>